<body style=user-select:none;margin:0>
<iframe id=F style=display:none></iframe>
<canvas id=C width=1920 height=1080 style=width:100%></canvas>
<span style=position:absolute;top:9;left:9>
y = <input id=D placeholder=f(x)>
<div id=O>
<script>

D.focus();
a = 10;

u = e=>
{
requestAnimationFrame(u);

W = F.contentWindow;

C.width |= 0;
X = C.getContext`2d`;
O.innerHTML = '';

if (D.value)
try {W.eval('f=x=>'+D.value);W.f(0);

I = parent.OS13k.Input(window)

A = [];
a = parent.OS13k.Clamp(a+a*I.wheel/1e3, 1e3, .1);
n = 1e9;
m = -n;
for(i = 0; i < 1921; i++)
    A[i] = W.f(a*i/960-a),
    A[i] > m ? m = A[i] : 0,
    A[i] < n ? n = A[i] : 0;

m-n ? 0 : n = -(m = Math.abs(m*2));

X.lineWidth = 3;
X.strokeRect(960, 0, 0, 2e3);
X.strokeRect(0, Y=OS13k.Lerp(OS13k.Percent(0,m,n), 0, 1080), 2e3, 0);

X.lineWidth = 9;
for(i = 0; i < 1921; i++)
    X.lineTo(i, OS13k.Lerp(OS13k.Percent(A[i],m,n), 0, 1080));
X.beginPath(X.stroke());

X.font = '3em"';
X.fillStyle='#f00';
X.fillText((-a).toPrecision(3), 9, Y-9);
X.textAlign = 'right';
X.fillText(m.toPrecision(3), 950, 50);
X.fillText(n.toPrecision(3), 950, 1070);
X.fillText(a.toPrecision(3), 1900, Y-9);

p = I.mousex*2-1;
Y = W.f(a*p);
O.innerHTML = `x = ${a*p}<br>y = ${Y}`;

X.fill(X.arc(960 + p*960, OS13k.Lerp(OS13k.Percent(Y,m,n), 0, 1080), 19, 0, 7));

}catch (e) {}}

u();

</script>