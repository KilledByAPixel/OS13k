<!--

OS13k is a tiny operating system designed for JS13k.
It has native support for Shadertoys, Dweets, ZzFX, trophies, and more.
https://github.com/KilledByAPixel/OS13k

â¤ï¸ OS13k Team âœŒï¸ðŸ˜„

-->

<title>OS13k - A Tiny JavaScript OS</title>
<link rel=icon type=image/x-icon href='favicon.ico'/>
<meta name=viewport content='width=device-width,initial-scale=1,user-scalable=0'>
<script src=music/songs/cuddly.js?9></script>
<script src=music/songs/iamback.js?9></script>
<script src=music/songs/sanxion.js?9></script>
<script src=music/songs/depp.js?9></script>
<meta charset=utf-8>

<!-- HTML above is OPTIONAL -->

<style>
body
{
    opacity:0;
    margin:0;
    overflow:hidden;
    font-family:arial;
    font-size:22;
    user-select:none;
    white-space:nowrap;
    background:#000;
}
#menu
{
    display:flex;
    flex-direction:column;
    background:#000;
}
.programMenu { background:linear-gradient(#fff,#888); }
#menu, .programMenu
{
    visibility:hidden;
    position:absolute;
    z-index:20000;
    box-shadow:5px 5px 9px;
    border:2px solid;
}
.program
{
    font-size:18;
    height:18;
    padding:4;
}
.activeWindow { border:3px solid#aaa; }
#taskbar
{
    position:absolute;
    z-index:10000;
    width:100%;
    background:linear-gradient(#888,#333);
    box-shadow:0px 1px 9px;
    border:2px solid;
    left:-2;
}
.taskbarIcon { width:50; height:40; text-shadow:1px 1px 3px#000; overflow:hidden; }
.programActive,
.taskbarIconActive         { background:linear-gradient(#ff8,#fff); }
.taskbarIcon:hover         { background:linear-gradient(#fff,#44f); }
#tray
{
    margin:2;
    padding-left:9;
    padding-right:9;
    color:#fff;
    background:linear-gradient(#000,#333);
    border:1px solid;
    border-radius:6px;
    text-shadow:1px 1px 3px#000;
}
.trayIcon       { padding:2; }
.trayIcon:hover { background:#fff3; }
.popup
{
    position:relative;
    z-index:10000;
    width:200;
    padding:8;
    white-space:normal;
    text-align:center;
    background:linear-gradient(#eee,#888);
    box-shadow:9px 9px 19px;
    border:2px solid;
    border-radius:9px;
}
.trophyIcon
{
    padding:9;
    font-size:40;
    text-shadow:2px 2px 4px;
    white-space:nowrap;
}
#background
{
    opacity:0;
    position:absolute;
    width:100%;
    height:100%;
    color:#0002;
    font-family:impact;
    font-size:30vw;
    font-weight:900;
    position:absolute;
}
.program, #taskbar, .taskbarIcon, #background, #tray
{
    display:flex;
    align-items:center;
    justify-content:center;
}
</style>
<div id=background></div>
<div id=desktop>
<div id=taskbar>
<div id=taskbarSpace style=flex:1></div>
<div id=tray></div>
</div>
<div id=popups style=float:right></div>
<div id=programsMenu style=position:absolute></div>
<div id=menu></div>
<iframe id=windowTemplate style=display:none>
<style>
:host
{
    visibility:hidden;
    position:absolute;
    background:#000;
    box-shadow:5px 5px 9px;
    border:3px solid#222;
    border-radius:6px;
    overflow:hidden;
}
input, button, span { margin:4; }
textarea            { padding:9; }
span                { white-space:nowrap; }
.titlebar
{
    height:34;
    font-size:24;
    display:flex;
    align-items:center;
    white-space:nowrap;
    background:linear-gradient(#ccc,#444);
    border-bottom:3px solid;
}
.titlebarActive       { background:linear-gradient(#eee,#88f); }
.titlebarActiveUser   { background:linear-gradient(#eee,#8f8); }
.titlebarActiveSticky { background:linear-gradient(#eee,#f88); }
.titlebarSticky       { background:linear-gradient(#ccc,#844); }
#name                 { width:100%; overflow:hidden; cursor:grab; }
#icon           
{ 
    display:inline;
    text-shadow:1px 1px 3px#000;
    margin-left:9;
    margin-right:9;
    pointer-events:none;
}
#frame
{
    width:100%;
    height:100%;
    background:#fff;
    border:none;
    visibility:hidden;
}
#codeText
{
    height:199;
    background:#000;
    color:#fff;
}
#errorText
{
    background:#000;
    color:#f00;
}
#codeOptions
{
    background:#111;
    color:#fff;
    font-size:16;
    overflow:auto;
}
#codeText, #errorText, #codeOptions
{
    width:100%;
    resize:none;
    outline:0;
    border-top:2px solid;
}
</style>
</iframe>
<script>

///////////////////////////////////////////////////////////////////////////////
// OS13k Version Check

const OS13kVersion = 81;
const OS13kPageCacheVersion = 300; // force pages to be refreshed
{
    // version check, clear local storage if older
    if (localStorage.OS13k && localStorage.OS13kVersion != OS13kVersion)
    {
        alert('OS13k version out of date! System reset in 3, 2, 1...');

        delete localStorage.OS13k;
        //localStorage.clear();
    }

    localStorage.OS13kVersion = OS13kVersion;
}

</script>
<script src=OS13k\OS13kProgramMenu.js></script>
<script src=OS13k\OS13kProgram.js></script>
<script src=OS13k\OS13kWindow.js></script>
<script src=OS13k\OS13kTaskbarIcon.js></script>
<script src=OS13k\OS13kTrayIcon.js></script>
<script src=OS13k\OS13kZzFX.js></script>
<script src=OS13k\OS13kInput.js></script>
<script src=OS13k\OS13kProgramStubs.js?v300></script>
<script src=OS13k\OS13k.js></script>