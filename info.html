<h2 class="code-line" data-line-start=0 data-line-end=1 ><a id="The_Plan_0"></a>The Plan</h2>
<ul>
<li class="has-line-data" data-line-start="1" data-line-end="2">My crazy idea is to make this tiny OS to host a variety of games and apps and fit it in 13k</li>
<li class="has-line-data" data-line-start="2" data-line-end="3">By sharing code like shader setup, dweets, and zzfx we can pack a lot into 13k</li>
<li class="has-line-data" data-line-start="3" data-line-end="4">OS13k is under 6k by itself, the bulk if it is mostly ZzFX, shader code, dweets and the program list</li>
<li class="has-line-data" data-line-start="4" data-line-end="5">I‚Äôd like to see as many people as possible contribute tiny games and apps</li>
<li class="has-line-data" data-line-start="5" data-line-end="6">Programs should be in the 100-1000 byte range, what matters most is how well it compresses</li>
<li class="has-line-data" data-line-start="6" data-line-end="7">If apps are 500 bytes on average leveraging shared code, we can fit over 14 of them, probably more</li>
<li class="has-line-data" data-line-start="7" data-line-end="8">We could easily pack 1k of that with just like 10 or more really cool dweets and shaders</li>
<li class="has-line-data" data-line-start="8" data-line-end="9">A very important rule to the contest is that all content must be new, so no old stuff!</li>
<li class="has-line-data" data-line-start="9" data-line-end="10">You can start with an old project but polish it up a lot, minify it and make it work with OS13k</li>
<li class="has-line-data" data-line-start="10" data-line-end="11">We will need to curate the best and perhaps smallest content for what actualy lands in the JS13k build</li>
<li class="has-line-data" data-line-start="11" data-line-end="12">Anything left out of the JS13k build will still be available in the full GitHub version</li>
<li class="has-line-data" data-line-start="12" data-line-end="13">Another big part of this is the trophy system that ANY JS13k game (even non-OS13k) can opt into</li>
<li class="has-line-data" data-line-start="13" data-line-end="14">It is still very early in development so all the apps are placeholders to be swapped out later</li>
<li class="has-line-data" data-line-start="14" data-line-end="15">We make this repo public on day 1 of Js13k and open source everything, I haven‚Äôt decided on license</li>
<li class="has-line-data" data-line-start="15" data-line-end="17">I will submit a much reduced version on day 1 for people to test their games achevements on</li>
</ul>
<p class="has-line-data" data-line-start="17" data-line-end="19">You can learn more about JS13k here, I won 2nd place last year!<br>
<a href="https://js13kgames.com/">https://js13kgames.com/</a></p>
<h2 class="code-line" data-line-start=20 data-line-end=21 ><a id="Programming_Info_20"></a>Programming Info</h2>
<ul>
<li class="has-line-data" data-line-start="21" data-line-end="22">OS13k stores it‚Äôs list of programs in programs.js</li>
<li class="has-line-data" data-line-start="22" data-line-end="23">For faster development iteration, the first program in the list opens automatically</li>
<li class="has-line-data" data-line-start="23" data-line-end="25">Make sure to put your program in the proper subfolder</li>
</ul>
<p class="has-line-data" data-line-start="25" data-line-end="26">Add an icon config to programs.js to register your program, and send me pull request, examples‚Ä¶</p>
<ul>
<li class="has-line-data" data-line-start="26" data-line-end="27">{name:‚ÄòTest‚Äô, icon:‚Äò‚úåÔ∏è‚Äô, src:‚Äòsystem/test.html‚Äô, multiple:1, reload:1, code:1}</li>
<li class="has-line-data" data-line-start="27" data-line-end="28">{name:‚ÄòUnderwater Cavern‚Äô, icon:‚Äòüåä‚Äô, author:‚ÄòPavel‚Äô, src:‚Äòdweets/underwaterCavern.dweet.js‚Äô}</li>
<li class="has-line-data" data-line-start="28" data-line-end="29">{name:‚ÄòYin Yangs‚Äô, icon:‚Äò‚òØÔ∏è‚Äô, src:‚Äòtoys/infiniteYinYangs.shader.txt‚Äô}</li>
<li class="has-line-data" data-line-start="29" data-line-end="31">{src:‚Äòhelp.html‚Äô}</li>
</ul>
<h3 class="code-line" data-line-start=31 data-line-end=32 ><a id="Programming_31"></a>Programming</h3>
<ul>
<li class="has-line-data" data-line-start="32" data-line-end="33">OS13k can open any html file with javascript and it will work the same as if opened directly</li>
<li class="has-line-data" data-line-start="33" data-line-end="34">Chrome is recommended for development, but Firefox is also supported.</li>
<li class="has-line-data" data-line-start="34" data-line-end="35">Firefox does not work in local mode because it treats local files as cross-origin</li>
<li class="has-line-data" data-line-start="35" data-line-end="36">Strict mode is not enforced but recommended to make minification easier</li>
<li class="has-line-data" data-line-start="36" data-line-end="37">To force a page to refresh you can add ?(version) to the src link‚Ä¶ {src:‚Äòhelp.html?1‚Äô}</li>
<li class="has-line-data" data-line-start="37" data-line-end="38">Your program should be paused or light on cpu when it does not have focus, !document.hasFocus()</li>
<li class="has-line-data" data-line-start="38" data-line-end="39">Dweets and Shadertoys are automatically paused when not focued</li>
<li class="has-line-data" data-line-start="39" data-line-end="40">You do not need charset=utf-8, it will be applied automatically</li>
<li class="has-line-data" data-line-start="40" data-line-end="41">Prefix local storage keys with OS13k(program name) to prevent collisions</li>
<li class="has-line-data" data-line-start="41" data-line-end="42">OS13k works well on mobile devices, so we plan to have a separate entry for the JS13k mobile category</li>
<li class="has-line-data" data-line-start="42" data-line-end="43">Make use of the built in features of OS13k to save space in your code</li>
<li class="has-line-data" data-line-start="43" data-line-end="44">For now don‚Äôt worry about submitting fully minified versions of your code, just keep it clean</li>
<li class="has-line-data" data-line-start="44" data-line-end="45">I will make a separate folder specifically for our minified build</li>
<li class="has-line-data" data-line-start="45" data-line-end="47">There is very little overhead for OS13k function call names, remember this will be zipped</li>
</ul>
<h3 class="code-line" data-line-start=47 data-line-end=48 ><a id="Shadertoys_and_Dweets_47"></a>Shadertoys and Dweets</h3>
<ul>
<li class="has-line-data" data-line-start="48" data-line-end="49">Programs with the extension .shader.js or .dweet.js will automatically load as dweets or shadertoys!</li>
<li class="has-line-data" data-line-start="49" data-line-end="50">Shadertoys and dweets are automatically paused when they don‚Äôt have focus</li>
<li class="has-line-data" data-line-start="50" data-line-end="51">They also automatically have reload and show code options applied</li>
<li class="has-line-data" data-line-start="51" data-line-end="52">Dweets do not need to be under 140 characers, so if you want to make a small app, maybe use a dweet</li>
<li class="has-line-data" data-line-start="52" data-line-end="53">Dweets can do anything that other programs can do including access OS13k and zzfx</li>
<li class="has-line-data" data-line-start="53" data-line-end="54">Shadertoy shaders support iTime, iMouse, iResolution, and iChannel0</li>
<li class="has-line-data" data-line-start="54" data-line-end="56">iChannel0 is a loop back image of the previous frame, this can be used to store game logic or make effects</li>
</ul>
<h3 class="code-line" data-line-start=56 data-line-end=57 ><a id="System_Calls_56"></a>System Calls</h3>
<ul>
<li class="has-line-data" data-line-start="57" data-line-end="58">The function OS13kStart() is called on child frames when opened</li>
<li class="has-line-data" data-line-start="58" data-line-end="59">To acces OS13k features, use the OS13k object</li>
<li class="has-line-data" data-line-start="59" data-line-end="60">OS13k.CreateShader(canvas, shaderCode) - Create a shadertoy compatible webgl shader</li>
<li class="has-line-data" data-line-start="60" data-line-end="61">OS13k.RenderShader(canvas, shaderProgram, time=0) - Render a shader</li>
<li class="has-line-data" data-line-start="61" data-line-end="62">OS13k.Trophy(gameName, trophyName, icon, message) - Register a trophy for your game</li>
<li class="has-line-data" data-line-start="62" data-line-end="63">OS13k.KeyDirection(key) - Get {x, y} position from a key code for WASD or arrow keys</li>
<li class="has-line-data" data-line-start="63" data-line-end="64">OS13k.PlaySamples(samples, sampleRate=44100) - Play audio samples</li>
<li class="has-line-data" data-line-start="64" data-line-end="65">OS13k.PlaySeed(seed, lengthScale=1, volume=1, randomness=.05) - Play a zzfx sound from seed</li>
<li class="has-line-data" data-line-start="65" data-line-end="67">OS13k.Speak(text) - Play speech of the text</li>
</ul>
<h3 class="code-line" data-line-start=67 data-line-end=68 ><a id="ZzFX_67"></a>ZzFX</h3>
<ul>
<li class="has-line-data" data-line-start="68" data-line-end="69">ZzFX is my super tiny sound synth which is also on GitHub, but don‚Äôt let it‚Äôs size fool you</li>
<li class="has-line-data" data-line-start="69" data-line-end="70">Here is the sound desinger for ZzFX with a link to the public repo <a href="https://zzfx.3d2k.com/">https://zzfx.3d2k.com/</a></li>
<li class="has-line-data" data-line-start="70" data-line-end="71">ZzFx sounds can played directly by calling zzfx, volume is controlled by the system</li>
<li class="has-line-data" data-line-start="71" data-line-end="72">A seeded ZzFX sound player is available to save space with much smaller sound calls</li>
<li class="has-line-data" data-line-start="72" data-line-end="74">Example OS13k.PlaySeed(1006), I will create a tool for looking for sound seeds soon</li>
</ul>
<h3 class="code-line" data-line-start=74 data-line-end=75 ><a id="Math_Library_74"></a>Math Library</h3>
<ul>
<li class="has-line-data" data-line-start="75" data-line-end="76">OS13k.Random(max=1, min=0) - Get a seeded random value, OS13k.randomSeed to set the seed</li>
<li class="has-line-data" data-line-start="76" data-line-end="77">OS13k.Clamp(a, min=0, max=1) - Clamp value between min and max</li>
<li class="has-line-data" data-line-start="77" data-line-end="78">OS13k.Percent(v, a, b) - Get clamped percent between a and b</li>
<li class="has-line-data" data-line-start="78" data-line-end="79">OS13k.Lerp(p, a, b) - Lerp clamped percent between a and b</li>
<li class="has-line-data" data-line-start="79" data-line-end="81">Let me know if anything else should be included, I am considering adding a vector class</li>
</ul>
<h3 class="code-line" data-line-start=81 data-line-end=82 ><a id="Icon_settings_81"></a>Icon settings</h3>
<ul>
<li class="has-line-data" data-line-start="82" data-line-end="83">width and height - Size of window</li>
<li class="has-line-data" data-line-start="83" data-line-end="84">author - Name of creator</li>
<li class="has-line-data" data-line-start="84" data-line-end="85">multiple - Allows multiple copies of the window to open</li>
<li class="has-line-data" data-line-start="85" data-line-end="86">reload - Shows the reload page icon to reload your program</li>
<li class="has-line-data" data-line-start="86" data-line-end="88">code - Option to show the code for your program</li>
</ul>
<h3 class="code-line" data-line-start=88 data-line-end=89 ><a id="Trophies_88"></a>Trophies</h3>
<ul>
<li class="has-line-data" data-line-start="89" data-line-end="90">Apps can register trophies for their games, the os tracks which are unlocked</li>
<li class="has-line-data" data-line-start="90" data-line-end="91">A function is provided for apps to unlock trophies, OS13k.Trophy(gameName, trophyName, icon, message)</li>
<li class="has-line-data" data-line-start="91" data-line-end="92">The gameName,trophyName,icon together form the unique id for the trophy</li>
<li class="has-line-data" data-line-start="92" data-line-end="93">When a new trophy is unlocked or message is changed a popup will appear</li>
<li class="has-line-data" data-line-start="93" data-line-end="94">Total trophy count is shown in the taskbar</li>
<li class="has-line-data" data-line-start="94" data-line-end="95">The trophy case shows all unlocked trophies</li>
<li class="has-line-data" data-line-start="95" data-line-end="97">Trophies can be tested with the System/Test tool</li>
</ul>
<h3 class="code-line" data-line-start=97 data-line-end=98 ><a id="Any_JS13k_game_can_use_trophies_even_if_not_part_of_OS13k_97"></a>Any JS13k game can use trophies, even if not part of OS13k!</h3>
<ul>
<li class="has-line-data" data-line-start="98" data-line-end="99">To add a trophies to any JS13k game, just save a special key to localStorage</li>
<li class="has-line-data" data-line-start="99" data-line-end="100">The simplest way to add a single trophies is save localStorage[‚ÄúOS13kTrophy,GameName‚Äù]=&quot;&quot;</li>
<li class="has-line-data" data-line-start="100" data-line-end="101">For more control use localStorage[‚ÄúOS13kTrophy,GameName,TrophyName,Icon‚Äù] = ‚ÄúMessage‚Äù</li>
<li class="has-line-data" data-line-start="101" data-line-end="102">You can change the message to update the trophy, like if it is a highscore</li>
<li class="has-line-data" data-line-start="102" data-line-end="103">When OS13k is next run, it will search locaStorage and display popups for new trophies</li>
<li class="has-line-data" data-line-start="103" data-line-end="105">This is possible because all JS13k games share the same local storage! Pretty cool right?</li>
</ul>
<h3 class="code-line" data-line-start=105 data-line-end=106 ><a id="Resources_105"></a>Resources</h3>
<ul>
<li class="has-line-data" data-line-start="106" data-line-end="107"><a href="https://www.dwitter.net/">Dwitter</a> - The source of so much amazing tiny code</li>
<li class="has-line-data" data-line-start="107" data-line-end="108"><a href="http://dweetabase.3d2k.com/">The Dweetabase</a>, and offline searable database of every dweet</li>
<li class="has-line-data" data-line-start="108" data-line-end="109"><a href="https://www.shadertoy.com/">Shadertoy</a> - There are many amazing tweet and 2 tweet sized shaders</li>
<li class="has-line-data" data-line-start="109" data-line-end="110"><a href="https://js1k.com/">JS1k</a> - I imagine with so much shared code and zip we could fit many of these size</li>
<li class="has-line-data" data-line-start="110" data-line-end="112"><a href="https://js13kgames.com/">JS13k</a> - This is our goal</li>
</ul>
<h3 class="code-line" data-line-start=112 data-line-end=113 ><a id="Potential_Features_112"></a>Potential Features</h3>
<ul>
<li class="has-line-data" data-line-start="113" data-line-end="114">Vertex shader customization (currently it is always a quad)</li>
<li class="has-line-data" data-line-start="114" data-line-end="115">More Shadertoy paremeters, custom textures</li>
<li class="has-line-data" data-line-start="115" data-line-end="116">Multi pass Shadertoys</li>
</ul>